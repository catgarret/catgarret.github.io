/*!
* jQuery Google Translate API 2.0 plugin
* https://github.com/michaeldewildt/jquery-translate
* Copyright 2013 Michael De Wildt - MIT License
*/
(function(e,t,n){"use strict";e.translate={};var r={MAX_SIZE:1e3,progressIndicator:e('<div class="translating">Translating</div>')};var i={push:function(e){r.textSize+=e.length;if(r.textSize>r.MAX_SIZE){r.textCollectionIndex++;r.textCollection[r.textCollectionIndex]=[];r.textSize=e.length}r.textCollection[r.textCollectionIndex].push(encodeURIComponent(e))},collect:function(t){var n=t.children();if(n.size()>0){n.each(function(){i.push(e(this).text().trim())})}else if(t.size()>0){t.each(function(){i.push(e(this).text().trim())})}else{i.push(t.text().trim())}return this},done:function(t){var n=t.children(),i=[];for(var s=0;s<=r.translatedTextCollection.length;s++){i=i.concat(r.translatedTextCollection[s])}if(n.size()>0){n.each(function(t){e(this).html(i[t])})}else if(t.size()>0){t.each(function(t){e(this).html(i[t])})}else{t.html(i[0])}return this.removeProgress(t).onComplete()},parseResonse:function(e,t){var n=t.data.translations;r.translatedTextCollection[e]=[];for(var i=0;i<n.length;i++){r.translatedTextCollection[e].push(n[i].translatedText)}return this},showProgress:function(e){r.progressIndicator.insertBefore(e);return this},removeProgress:function(e){e.prev().remove();return this},setDefaults:function(){if(typeof e.translate.progressIndicator!=="undefined"){if(typeof e.translate.progressIndicator==="object"){r.progressIndicator=e.translate.progressIndicator}else{r.progressIndicator=e(e.translate.progressIndicator)}delete e.translate.progressIndicator}if(typeof e.translate.onComplete!=="undefined"){i.onComplete=e.translate.onComplete;delete e.translate.onComplete}r.translatedTextCollection=[];r.textCollection=[[]];r.textCollectionIndex=0;r.textSize=0;return this},onComplete:function(){}};e.fn.translate=function(t){if(!this.length){e.error("Element not found: '"+this.selector+"'")}e.translate=e.extend(t,e.translate);i.setDefaults().collect(this).showProgress(this);var n=this,s=[],o=function(){var t=0;return function(){var s=t++;return e.get("https://www.googleapis.com/language/translate/v2?q="+r.textCollection[s].join("&q="),e.translate).done(function(e){i.parseResonse(s,e)}).fail(function(t){i.removeProgress(n);e.error(t.responseText)})}}();for(var u in r.textCollection){s.push(o())}return e.when.apply(e,s).then(function(){i.done(n)})}})(jQuery,window)